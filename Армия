using System;
namespace qwerty
{
    class Program
    {
        static void Main(string[] args)
        {
            string[,] namesAndRangsOfSoldiers = 
            {
                {"","","","","","","","","","","","","","","","","","","","", ""},
                {"","","","","","","","","","","","","","","","","","","","", ""},
            };
            List<int> numbersOfRangSoldiers = new List<int>();
            int numberOfSoldierToGetRang;
            bool isPlaceEmpty;

            Console.WriteLine("Вводите постепенно фамилии солдат в взводе (21шт.)");

            for (int i = 0; i < namesAndRangsOfSoldiers.GetLength(0) - 1; i++)
            {
                for (int j = 0; j < namesAndRangsOfSoldiers.GetLength(1); j++)
                {
                    Console.Write($"{j + 1}) ");
                    namesAndRangsOfSoldiers[i, j] = Console.ReadLine();
                    namesAndRangsOfSoldiers[i + 1, j] = "Рабочий";
                }
            }

            Console.Clear();
            Console.WriteLine("Ваш взвод");

            for (int i = 0; i < namesAndRangsOfSoldiers.GetLength(0) - 1; i++)
            {
                for (int j = 0; j < namesAndRangsOfSoldiers.GetLength(1); j++)
                {
                    Console.WriteLine($"{j+1}) {namesAndRangsOfSoldiers[i, j]} - {namesAndRangsOfSoldiers[1, j]}");
                }
            }

            Console.Write("Введите номер желаемого старшины взвода: ");
            numberOfSoldierToGetRang = int.Parse(Console.ReadLine());

            while (numberOfSoldierToGetRang > 21 || numberOfSoldierToGetRang < 1)
            {
                Console.Write("Введите номер существующего солдата: ");
                numberOfSoldierToGetRang = int.Parse(Console.ReadLine());
            }

            numbersOfRangSoldiers.Add(numberOfSoldierToGetRang);
            namesAndRangsOfSoldiers[1, (numbersOfRangSoldiers[0] - 1)] = "Старшина";
            Console.WriteLine("\nВведите 4 номера желаемых командиров:");

            for (int i = 0; i < 4; i++)
            {
                Console.WriteLine($"\n{i + 1} командир");
                numberOfSoldierToGetRang = int.Parse(Console.ReadLine());

                isPlaceEmpty = false;

                while (isPlaceEmpty == false)
                {
                    for (int j = 0; j < numbersOfRangSoldiers.Count(); j++)
                    {
                        if (numberOfSoldierToGetRang == numbersOfRangSoldiers[j] || numberOfSoldierToGetRang > 21 || numberOfSoldierToGetRang < 1)
                        {
                            Console.WriteLine("Это место занято или не существует, выберите другое: ");
                            numberOfSoldierToGetRang = int.Parse(Console.ReadLine());
                            break;
                        }
                        else if (j == numbersOfRangSoldiers.Count() - 1)
                        {
                            numbersOfRangSoldiers.Add(numberOfSoldierToGetRang);
                            isPlaceEmpty = true;
                            break;
                        }
                    }
                }

                namesAndRangsOfSoldiers[1, numbersOfRangSoldiers[i+1] - 1] = "Командир";
            }
            

            Console.Clear();
            Console.WriteLine("Ваш взвод");

            for (int i = 0; i < namesAndRangsOfSoldiers.GetLength(0) - 1; i++)
            {
                for (int j = 0; j < namesAndRangsOfSoldiers.GetLength(1); j++)
                {
                    Console.WriteLine($"{j + 1}) {namesAndRangsOfSoldiers[i, j]} - {namesAndRangsOfSoldiers[1, j]}");
                }
            }

            Console.ReadKey();
        }
    }
}
